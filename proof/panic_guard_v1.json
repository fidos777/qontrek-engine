{
  "proof_id": "panic_guard_v1",
  "version": "1.0.0",
  "release": "G19.9.2-R1.4.3",
  "component": "Panic Mode Enforcement",
  "type": "security_control",
  "objective": "503 enforcement for all /api/mcp/* endpoints when ATLAS_PANIC=true",
  "timestamp": "2025-01-22T15:00:00Z",
  "features": {
    "panic_detection": {
      "status": "completed",
      "description": "Middleware checks ATLAS_PANIC environment variable",
      "acceptance": "process.env.ATLAS_PANIC === 'true'"
    },
    "endpoint_blocking": {
      "status": "completed",
      "description": "All /api/mcp/* routes return 503 when panic active",
      "acceptance": "503 response with panic_mode_active error"
    },
    "observability_exception": {
      "status": "completed",
      "description": "/api/mcp/telemetry allowed during panic for observability",
      "acceptance": "Telemetry ingestion continues even in panic mode"
    },
    "governance_exception": {
      "status": "completed",
      "description": "/api/mcp/governance allowed to show panic status",
      "acceptance": "G16 shows 'PANIC MODE ACTIVE' message"
    },
    "highest_priority": {
      "status": "completed",
      "description": "Panic check happens first in middleware, before auth/rate-limit",
      "acceptance": "Panic block occurs before any other middleware logic"
    }
  },
  "panic_behavior": {
    "trigger": "ATLAS_PANIC=true in environment",
    "blocked_endpoints": [
      "/api/mcp/sync/*",
      "/api/mcp/federation",
      "/api/mcp/events",
      "/api/mcp/resources (with panic)",
      "/api/mcp/tools (with panic)",
      "/api/mcp/rate-limit"
    ],
    "allowed_endpoints": [
      "/api/mcp/telemetry (observability)",
      "/api/mcp/governance (status check)"
    ],
    "response": {
      "status": 503,
      "error": "panic_mode_active",
      "message": "Atlas Federation is currently disabled (panic mode). All MCP endpoints are unavailable."
    }
  },
  "files": {
    "middleware": "cockpit-ui/middleware.ts"
  },
  "governance": {
    "gate": "G16",
    "criterion": "Operational Safety - Panic 503 enforcement",
    "status": "pass"
  },
  "signature": {
    "author": "Claude Code",
    "method": "R1.4.3 Security & Governance Seal",
    "hmac": "panic_guard_v1_completed"
  }
}
